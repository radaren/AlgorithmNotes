---
title: 2016_4+2
date: 2016-06-27 20:12:29
tags:
  - algorithm
---



伙食很好

讲题详细

难度迷人

补贴超多

公费旅游

五星好评

<!-- more -->

# 第一场打铁

五个小时一题没有过的感觉还是很不好受的.

晚上思考了很久人生.觉得大一还是努力去见见世面吧.

但是大二的两个队友却都没空参赛了.sigh..真的有一些莫名的绝望.



## 第一题 an = 2an-1 - 3an-2 + 1

给出a0,a1求第n个数

当时看到题就很兴奋地写起了矩阵快速幂.T了之后找公式,莫名继续T到最后.

赛后看诗源用矩阵快速幂过的,梓华用快速幂过的.......绝望- -



思路是找到高中数列公式,然后快速幂

## 快速幂写烂后找的歪门邪道

1. 存前面200w的2^n,如果快速幂遇到直接查表
2. 2的快速幂位运算

## 总结

1. 一段代码写烂一个小时后就得有重写的打算,不要老是"调"评测系统
2. 一个代码超时如果尚有可回忆的方法,那么久一定要坚持复杂度.超时可能是写烂了而不是复杂度太高



## 第二题 最小哈密尔顿

给出一个Wn的圈(见离散书上的举例...)每次修改一条边,求每次修改后的最小哈密尔顿回路



这题是思路不对.

一开始map存的东西不多,后来用优先队列做,每次把修改的边和旁边两条都丢到队列里面,维护版本信息.但是这样的话旧版本可能会覆盖新版本然后就**忘记pop**了...

对于一个区间的动态维护首先应该想到线段树.

- 线段树和优先队列的区别.
- 线段树是每次查询的时候更新,优先队列对于版本信息会较为混淆(不能及时剔除旧版本)

赛后诗源说map设计好一些也能过,

梓华维护了一颗二叉树+桶排..不明觉厉XD



另外最后一题听说也能用线段树来过,就是一个动态的归并?



# 第二场迷之两题

一上手看最后一题..写了半小时发现看错题了........

但是还算是捡回了昨天的运气XD

## 第一题 动归+剪枝

给一个10w长的(0,10w)的递增序列,求一个最长子序列

要求: gcd(bn,bn-1) > 1



过的太迷..不过也算走了正确的道路,但还是先讲故事吧..

打张素数表后,每读入一个元素

质因数分解,更新一个,dp值,定义为到第n个数的最长子序列,然后莫名WA到第一个数据...然后开始了谜一样的对OJ测试…重复1遍过了两组数据后就来劲了..看了眼时间直接循环200遍过到第4组数据,然后跳到800遍TLE,调回500遍第五组数据T,做了一些剪枝后WA,再用list优化了"下一个数"400第六组数据TLE,然后再优化365遍第八组数据了...

突然想到了第一天的悲伤..然后放弃这样瞎搞了...观察代码结构继续剪枝



1. 开一个c[maxn]数组记录每个数的最大质因数位置,然后分解的时候只需要分解到那就可以了.
2. 开一个a[maxn]数组,每读入一个数更新一次它所有质因数dp = maxdp[因数] + 1;

两个优化后0.368秒过了

4+2第一题..兴奋的打开了第二题



## 第二题 撒点算面积

第一遍看完题目居然懒得做...

> 给出两个矩形两个圆,求被矩形覆盖然而不被圆覆盖的面积

第二遍看完题目就开始后悔...这么水.......特别发现数据范围是(0,10)....

然后就开始了撒点打发…两个for循环(double x = 0;x < 10;x += 0.001)枚举其中的点统计符合要求的点数/100000就理论可以了,,然而居然WA...滚去再看题

发现是图像range是(0,10),怪自己眼瞎..居然看成了坐标range然后重新改了下枚举..就是第一个矩形统计不在圆里面的点,第二个统计不在圆而且不在第一个里面的点..过了...



赛后得知..坐标range就是(0,10),也就是说一开始的算法又写烂了..



## 后面两道没过的题

### 第三题,求每次删回文串最少删多少次.

记忆化搜索DP状态转移方程写崩了...

```c++
DP(i,j) 
=  0 //i <= j
=  1 //i == j || i + 1 == j && a[i] == a[j]
=  DP(i+1,j-1)//a[i] == a[j]
=  min(DP(i+1,j) , DP(i,j+1) )+1 // a[i] != a[j]这里错了....

dp(i,j) = min(dp(i,k)+dp(k+1,j))
if(ai==aj) dp(i,j)=min(dp(i+1,j-1)
```

### 第四题,给出四堆石子最后拿走的输

最基本的NIM博弈都忘了也是迷...

题目是求最多四堆有那么多的时候,期中包含可赢情况的和



1. NIM博弈赢的方式是所有异或为0
2. 统计四堆不如统计两堆.然后枚举后面两堆和前面两堆异或一样就可以了..



BTW.今天晚霞挺美的.
生活还是要继续的:)

# 第三场步入正轨

今天来东校比赛..周围都是大腿光环:)

把两个实训队友落在珠海还是内心有一些愧疚的..不过下午看到做出来超级漂亮的板子.简直女神.

过了两题后学了两个小时算法..发现模板这种东西关键时刻还是比较鸡肋的.(顿时为期末模板写烂找好了借口).不过很有趣的是翻到了AC自动机的部分.然后认认真真看了一个小时(并没有看懂)恭喜少豪最后一秒钟提交通过233.

很开心的是郭老师过来说报销车费住宿费.公费旅游名不虚传233

话题步入正轨.这次比赛很难进校队了,但是从一定程度上已经扩宽了我的知识面.比如第三题AC自动机,第二题状态压缩以及第一场里面对于线段树的理解加深.也相对来说超过了最开始看4+2真题时候"可能打铁"的预期.与其说让我暑假放弃对于算法的训练,不如说方向更加明确了一些.

## 第一题 图像放大

一开题就全场一阵惊呼..因为贝爷放了两张游戏截图..

初看完题后发现是模拟..居然懒得做.....于是罚时感人



**题意**就是给出一个图像,中轴线把它原来一个像素放大成三个像素,外围一圈打码.



额直接调参数打表就可以了..freopen忘记关WA一次= =



## 第二题 生产机器

给出一堆事情,和"做某事得先做的事",最多做k件能获得的最大收益

N<=24



一开始还以为是树形..然后发现一件事可能有多件之前得做,,就确认是状压了

然而问题来了..状压不会写.= =开了个表发现太大了..于是尴尬地写起了搜索,当然还是用01串来保存状态.用位运算一定程度上加速..交的时候dfs挺虚的把set改成了人品hash..再审视一圈哪里可以剪枝后居然0.03s过了.(目瞪口呆)....



赛后听说更多人写的状压..(大概这是我搞完树形之后的方向吧x)



## 还有三道没过的题

### 第三题 AC自动机

给出一堆模板串,在一个长串里面找最大匹配次数 两边都是2*10^6

一开始想了一个字典树,然后跳跃式寻找.不过写烂了后就去翻书(学习了),翻白书到串的那里很惊喜的发现题意和AC自动机如此一致..就开始兴奋地学起数据结构了...然而一个小时没看懂之后只好抄模板.当然挂了= =今天晚上学一下吧.

### 第四题 几何智力题

给出平面上三个点,求以这三个点为圆心的最小半径,

使得三个圆里面分别纯在一个点能形成等边三角形.



最值问题二分答案

固定一个点时候,第三个点的区域是围绕第二个点的区域旋转的一个圆

那么第一个点也不动的时候,就是半径为2r的一个圆

然后再二分半径,判断是否符合条件即可???

(其实这题当时就被英文卡住了看不懂..比赛结束都没人过)



### 第五题 1024

Alice和Bob互相最开始都有M(100000)滴血

他们有N(1000000)种技能,每次打对方的时候先扣自己相等的血..

谁没血了当然就输了..问先发起攻击的Alice能不能赢



恍恍惚惚一开始看错题成为全场第一个交的233

然后过了很久都没什么人过于是贝爷修改数据有个哥们写个脚本暴力枚举..被警告了233



一个背包..但是需要birset优化(似乎我当时也是..看到O(n^2)没有继续往下做了)



今天暴雨.但心情的确挺明媚的XD

# 最后一场继续打铁

心还是很累..

今天完成第一次把电脑弄崩的成就...

毕竟我还是太嫩了..不过最为可惜的是,看到两个省赛队友都拒绝参赛,那大二的我也不知道会做出什么选择,或许移动大三的课比较水吧..

不过一题没过的最后一天,看到队友能把小车电焊部分做好,真是超级欣慰和感动

## 第一题 最长公共子序列

给出两个串,第二个串每一个位置有两种可能,第一个每个值出现次数不超过五次

英语题..出题师兄越做越忍不住..不停加注释什么的终于破译了英语之谜

**论爆到英语大神重要性** 来考考那么weed out是什么意思(微笑)

然而还是被自己设计的dp坑到底....



诶这一题有趣的是,因为不会超过五次.所以可以把每个上面的数对应下来,构造一条不超过100w的链然后就变成最长上升子序列了(**被这种模型当场惊艳**)



## 最后一题模拟

写第一题卡到最后半小时看了想board发现最后过这题人突然变多..

然后想到师兄改过几次题.........(看来最开始的题目并不准备让任何人过啊.)

然后一看..就一道模拟..数据量小的已经完全不是我当初看到的模样

给出一个字符串,有往前中后加减一段字符串..然后查询某个子串在里面出现过多少次...



STL还是很不熟悉...调STL时候把电脑调垮了orz谢谢少豪让我开了另一台(但又找了好久密码条= =)这题数据量改到1k了之后就直接那一个deque模拟就行.......居然最后一场把模拟也写崩了把自己迷晕



额师兄说没改数据前的做法是维护一颗四叉平衡树:)

> 少豪大腿的解说
>
> 你维护一个数组f，fi表示长度为i的序列最后一个数字的最小情况，然后每插入一个数，就二分找到一个位置j使得这个数字可以插到长度为j的数字后面使得序列长度变成j+1且这个数字＜fj+1，然后更新fj+1
>
> 因为fi肯定＞fi-1
>
> 比如数列1 3 2 4
>
> 一开始fi都是0
>
> 然后第一个数1，因为一开始最长长度只有0
>
> 所以在0和0间二分
>
> 找到0这个位置
>
> 然后f1就变成1
>
> 因为长度为1的序列最后一个数字最小是1
>
> 现在插入第二个数字
>
> 第二个数字是3
>
> 最长长度是1，所以在0和1之间二分
>
> 然后二分到位置1，因为f1＜3，3可以接到1后，形成一个长度为2的序列
>
> 所以更新f2为3
>
> 现在插入第三个数字1
>
> 最长长度是2
>
> 所以在0和2之间二分
>
> 找到位置0，因为只有f0＜1，只能接到长度为0的序列后面
>
> 你可以预处理出，每个女性会和哪些男的有关系
>
> 然后每个女性选的男的位置要求递增
>
> 就从第一个女性开始
>
> 每次维护我刚刚说的那个f数组
>
> 对于一个女性，题目说最多有5个男性是同样的
>
> 也就是说每个女性最多连接10个男性
>
> 那么对每个女性做10次二分，更新那个f数组

## 第二题 计算几何

继续被英文坑错题意(英语大神请救我)

给出平面(布)上一堆点(凸包,和在他们上的力(给出Fi)

求能不能平衡抬起一个重物(给出m),如果能求m的位置



….看成"每个点最大的力"就一脸懵逼的放弃了(手动再见)

求这些力的合力,看是否能有一个点使得外面所有点在图形的重心上杠杆平衡



## 第三题 第一题的子串可以循环

..和第一题相像的题意,最后师兄讲题时候说先找到一个最大匹配,然后把第一个匹配移到最后,然后调整......



## 第四题 树上莫队

求一颗树上两个点路径中经过相同颜色第k多的颜色..

和第一天最后一题有点像..今晚有空看一下诺顿定理>

(BTW第二天最后一题把单调队列考了)